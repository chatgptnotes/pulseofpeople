# Root-level Nixpacks configuration for Railway monorepo
# This defaults to deploying the BACKEND service
# For frontend, create a separate Railway service with Root Directory = "frontend"

[phases.setup]
nixPkgs = ["python39", "postgresql"]

[phases.install]
cmds = ["cd backend && pip install -r requirements.txt"]

[phases.build]
cmds = ["cd backend && python manage.py collectstatic --noinput"]

[start]
cmd = "cd backend && gunicorn config.wsgi:application --bind 0.0.0.0:$PORT"
