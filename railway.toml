# ============================================
# Pulse of People - Railway Deployment Config
# Backend Django Application
# ============================================

[build]
builder = "NIXPACKS"
buildCommand = "pip install -r requirements.txt && python manage.py collectstatic --noinput"

[deploy]
startCommand = "gunicorn config.wsgi:application --bind 0.0.0.0:$PORT --workers 4 --threads 2 --timeout 120 --access-logfile - --error-logfile - --log-level info"
healthcheckPath = "/api/health/"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# ============================================
# Environment Variables (Set in Railway Dashboard)
# ============================================
# These should be configured in the Railway dashboard:
# - SECRET_KEY
# - DEBUG=False
# - ALLOWED_HOSTS
# - DB_NAME
# - DB_USER
# - DB_PASSWORD
# - DB_HOST
# - DB_PORT
# - REDIS_URL (from Railway Redis addon)
# - CORS_ALLOWED_ORIGINS
# - CSRF_TRUSTED_ORIGINS
# - EMAIL_HOST_USER
# - EMAIL_HOST_PASSWORD
# - SENTRY_DSN
# - AWS_ACCESS_KEY_ID (if using S3)
# - AWS_SECRET_ACCESS_KEY
